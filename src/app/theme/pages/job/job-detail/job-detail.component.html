<!-- START: Subheader -->
<div class="m-subheader" appunwraptag="">
    <div class="d-flex align-items-center">
        <div class="mr-auto">
            <h3 class="m-subheader__title m-subheader__title--separator">
                {{title1}}
            </h3>
            <ul class="m-subheader__breadcrumbs m-nav m-nav--inline">
                <li class="m-nav__item m-nav__item--home">
                    <a href="#" class="m-nav__link m-nav__link--icon">
                        <i class="m-nav__link-icon la la-home"></i>
                    </a>
                </li>
                <li class="m-nav__separator">
                    -
                </li>
                <li class="m-nav__item">
                    <a href="" class="m-nav__link">
                        <span class="m-nav__link-text">
                            {{title2}} {{thisPodId}}
                        </span>
                    </a>
                </li>
                <!-- <li class="m-nav__separator">
                    -
                </li>-->
                <li class="m-nav__item">
                    <a href="" class="m-nav__link">
                        <span class="m-nav__link-text">
                            <!-- Position -->
                        </span>
                    </a>
                </li>
                <!-- <li class="m-nav__separator">
                        -
                    </li> -->
                <li class="m-nav__item">
                    <a href="" class="m-nav__link">
                        <span class="m-nav__link-text">
                            <!-- # {{posId2}} -->
                        </span>
                    </a>
                </li>
            </ul>
        </div>
        <div>
            <div class="m-dropdown m-dropdown--inline m-dropdown--arrow m-dropdown--align-right m-dropdown--align-push" m-dropdown-toggle="hover"
                aria-expanded="true">
            </div>
        </div>
    </div>
</div>
<!-- END: Subheader -->

<div class="m-content">
    <div class="row">
        <!-- begin::Page loader -->
        <div class="col-lg-12 centred my-auto">
            <ng-template #alertError></ng-template>
        </div>

        <div class="col-lg-12 centred my-auto" *ngIf="loading">
            <div class="m-section__content">
                <div class="m-demo" data-code-preview="true" data-code-html="true" data-code-js="false">
                    <div class="m-demo__preview">
                        <div class="m-stack m-stack--ver m-stack--general m-stack--demo">

                            <div class="m-stack__item m-stack__item--center m-stack__item--middle">
                                <span>
                                    Loading data. Please wait...
                                </span>
                                <span>
                                    <div class="m-loader m-loader--lg m-loader--success" style="width: 30px; display: inline-block;"></div>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end::Page loader -->

        <div class="col-lg-12" *ngIf="!loading">
            <div *ngIf="applyAdvPos" class="alert {{advPosStyle}} m-alert m-alert--default " role="alert">
                <strong>{{advPosMsg}}</strong>
            </div>
            <div *ngIf="applyBtnDisplay" class="m-button-advert">
                <!--begin::advertise buttons -->
                <button id="advertise-job" type="button" class="btn m-btn--pill btn-primary btn-lg m-btn m-btn--custom" data-toggle="modal"
                    data-target="#modal_to_apply">{{btnApply}}
                </button>
                <!--end::advertise buttons -->
            </div>
        </div>
        <div class="col-lg-12" *ngIf="!loading">
            <!--begin::Portlet-->
            <div class="m-portlet m-portlet--full-height">
                <!--begin::Section-->
                <div class="m-accordion m-accordion--bordered" id="m_accordion_1" role="tablist">
                    <!--begin::Item:info-->
                    <div class="m-accordion__item">
                        <div class="m-accordion__item-head" role="tab" id="m_accordion_1_item_1_head" data-toggle="collapse" href="#m_accordion_1_item_1_body"
                            aria-expanded="    false">
                            <span class="m-accordion__item-mode"></span>
                            <span class="m-accordion__item-title m-accordian__item-mode-title">
                                {{tab1Title}}
                            </span>
                            <span class="m-accordion__item-icon">
                                <i class="fa flaticon-notes"></i>
                            </span>
                        </div>
                        <div class="m-accordion__item-body show" id="m_accordion_1_item_1_body" role="tabpanel" aria-labelledby="m_accordion_1_item_1_head">
                            <div class="m-accordion__item-content">
                                <!-- start: JOB INFO -->
                                <table class="table table-bordered">
                                    <tr>
                                        <td style="width: 30%">
                                            Position ID
                                        </td>
                                        <td>
                                            {{ data.profile && data.profile[0]?.position_id}}
                                            <span *ngIf="data.profile &&data.profile[0]?.Occupied=='1'; else occVac" class="m-badge m-badge--success">
                                                Occupied
                                            </span>
                                            <ng-template #occVac>
                                                <span class="m-badge m-badge--warning">
                                                    Vacant
                                                </span>
                                            </ng-template>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            Job Title
                                        </td>
                                        <td>
                                            {{data.profile && data.profile[0].job}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            Position
                                        </td>
                                        <td>
                                            {{data.profile && data.profile[0].position_name}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            Position Description
                                        </td>
                                        <td>
                                            <div class="col-12" *ngIf="editedPosDesc" class="alert {{updPosDescStyle}} m-alert m-alert--default " role="alert">
                                                <strong>{{updPosDescMsg}}</strong>
                                            </div>
                                            <div *ngIf="!showupdPosDesc">
                                                <span *ngIf="data.profile &&data.profile[0]?.position_desc!=null; else posDesc">
                                                    {{ data.profile && data.profile[0]?.position_desc}}
                                                </span>
                                                <ng-template #posDesc>-</ng-template> <span *ngIf="canUpdPosDesc">[<a href="#" (click)="changeUpdPosDesc(true)">Update</a>]</span>
                                            </div>
                                            <div *ngIf="showupdPosDesc">
                                                <form [formGroup]="updPosDescForm" (ngSubmit)="onPosDescFormSubmit()">
                                                    <textarea class="form-control m-input m-input--air" formControlName="updPosDesc" required>{{data.profile && data.profile[0]?.position_desc}}</textarea>
                                                    <input type="hidden" formControlName="updPosDescPosId" value="data.profile[0].position_id" />
                                                    <p class="error_message" style="color:red" *ngIf="updPosDescForm.get('updPosDesc').hasError('required') && (updPosDescForm.get('updPosDesc').dirty)">Please define position description.</p>
                                                    <div class="text-right">
                                                        <!--*ngIf="toUpdPurpose"-->
                                                        <button type="button" class="btn btn-primary btn-sm" (click)="changeUpdPosDesc(false)">Cancel</button>
                                                        <button type="submit" class="btn btn-primary btn-sm" [disabled]="!updPosDescForm.valid">Save</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            Division
                                        </td>
                                        <td>
                                            {{data.profile && data.profile[0].division}}
                                        </td>
                                    </tr>

                                    <tr>
                                        <td style="width: 30%">
                                            Band
                                        </td>
                                        <td>
                                            {{data.profile && data.profile[0].band}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            Cluster
                                        </td>
                                        <td>
                                            {{data.profile && data.profile[0].cluster}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            LOB
                                        </td>
                                        <td>
                                            {{data.profile && data.profile[0].lob}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            Job Family
                                        </td>
                                        <td>
                                            {{data.profile && data.profile[0].job_family}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            Report To
                                        </td>
                                        <td>
                                            {{data.profile && data.profile[0].report_to}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            No. of Indirect Reports
                                        </td>
                                        <td>
                                            {{data.profile && data.purpose[0]?.report_to_count}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="width: 30%">
                                            No. of Direct Reports
                                        </td>
                                        <td>
                                            {{data.profile && data.purpose[0]?.inreport_to_count}}
                                        </td>
                                    </tr>
                                </table>
                                <!-- end: JOB INFO -->
                            </div>
                        </div>
                    </div>
                    <!--end::Item:info-->
                    <!--begin::Item:purpose-->
                    <div class="m-accordion__item">
                        <div class="m-accordion__item-head collapsed" role="tab" id="m_accordion_1_item_2_head" data-toggle="collapse" href="#m_accordion_1_item_2_body"
                            aria-expanded="    false">
                            <span class="m-accordion__item-mode"></span>
                            <span class="m-accordion__item-title m-accordian__item-mode-title">
                                {{tab3Title}}
                                <span class="m-menu__link-badge">
                                    <span *ngIf="!data.purpose || data.purpose[0]?.job_purpose.length<1; else purTrue" class="m-badge m-badge--danger">
                                        Empty
                                    </span>
                                    <ng-template #purTrue>
                                        <span class="m-badge m-badge--success">
                                            OK
                                        </span>
                                    </ng-template>
                                </span>
                            </span>
                            <span class="m-accordion__item-icon">
                                <i class="fa flaticon-list-1"></i>
                            </span>
                        </div>
                        <div class="m-accordion__item-body collapse" id="m_accordion_1_item_2_body" role="tabpanel" aria-labelledby="m_accordion_1_item_2_head">
                                <div class="m-accordion__item-content" *ngIf="!toUpdPurpose">
                                <!-- {{data.profile && data.purpose[0]?.purpose}} --- {{toUpdPurpose}}
                                <div *ngIf="!data.qualification || data.qualification.length<1">{{noData}}</div> -->                                
                                <span *ngIf="!data.purpose||!data.purpose[0]||data.purpose[0].job_purpose<1; else purTrue">
                                    {{noData}}
                                </span>
                                <ng-template #purTrue>
                                    {{data.profile && data.purpose[0]?.job_purpose}}
                                </ng-template>
                            </div>
                            <div class="m-accordion__item-content" *ngIf="toUpdPurpose">
                                <div class="col-12" *ngIf="editedPurpose" class="alert {{updPurposeStyle}} m-alert m-alert--default " role="alert">
                                    <strong>{{updPorposeMsg}}</strong>
                                </div>
                                <form [formGroup]="updPurposeForm" (ngSubmit)="onPurposeFormSubmit()">
                                    <textarea class="form-control m-input m-input--air" formControlName="updPurpose" required>{{data.profile && data.purpose[0]?.purpose}}</textarea>
                                    <input type="hidden" formControlName="updPurposePosId" value="data.profile[0].position_id" />
                                    <p class="error_message" style="color:red" *ngIf="updPurposeForm.get('updPurpose').hasError('required') && (updPurposeForm.get('updPurpose').dirty)">Please define position description.</p>
                                    <div class="text-right" *ngIf="toUpdPurpose">
                                        <button type="submit" class="btn btn-primary btn-sm" [disabled]="!updPurposeForm.valid">Save</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!--end::Item:purpose-->

                    <!--begin::Item:qualification-->
                    <div class="m-accordion__item">
                        <div class="m-accordion__item-head collapsed" role="tab" id="m_accordion_1_item_3_head" data-toggle="collapse" href="#m_accordion_1_item_3_body"
                            aria-expanded="    false">
                            <span class="m-accordion__item-mode"></span>
                            <span class="m-accordion__item-title m-accordian__item-mode-title">
                                {{tab4Title}}
                                <span class="m-menu__link-badge">
                                    <span *ngIf="!data.qualification||data.qualification.length<1; else quaTrue" class="m-badge m-badge--danger">
                                        0
                                    </span>
                                    <ng-template #quaTrue>
                                        <span class="m-badge m-badge--success">
                                            {{data.qualification.length}}
                                        </span>
                                    </ng-template>
                                </span>
                            </span>
                            <span class="m-accordion__item-icon">
                                <i class="fa flaticon-user-ok"></i>
                            </span>
                        </div>
                        <div class="m-accordion__item-body collapse" id="m_accordion_1_item_3_body" role="tabpanel" aria-labelledby="m_accordion_1_item_3_head">
                            <div class="m-accordion__item-content">
                                <!--begin:job qualification table-->
                                <div class="m-portlet__body">
                                    <div *ngIf="editedQua" class="alert {{addQuaStyle}} m-alert m-alert--default " role="alert">
                                        <strong>{{addQuaMsg}}</strong>
                                    </div>
                                    <div *ngIf="!data.qualification || data.qualification.length<1">{{noData}}</div>
                                    <div class="col-12 text-right" *ngIf="toUpdQua">
                                        <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#m_modal_qua_upd" (click)="updateQua(0, 1, '', '')">Add</button>
                                    </div>
                                    <!--begin:repeater form qualification-->
                                    <table class="table m-table" *ngIf="data.qualification && data.qualification.length>0">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>Category</th>
                                                <th>Area</th>
                                                <th>Sub-Area</th>
                                                <th *ngIf="toUpdQua"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let q of data.qualification;let qc = index">
                                                <td>{{qc+1}}</td>
                                                <td>{{findQuaName(q.QUAL)}}</td>
                                                <td>{{q.AREA}} </td>
                                                <td>{{q.SUB_AREA}}</td>
                                                <td *ngIf="toUpdQua">
                                                    <ul class="list-inline">
                                                        <li class="list-inline-item">
                                                            <a href="#" class="m-nav__link m-nav__link--icon" data-toggle="modal" data-target="#m_modal_qua_upd" (click)="updateQua(q.NO, q.QUAL, q.AREA, q.SUB_AREA)">
                                                                <i class="m-nav__link-icon la la-edit"></i>
                                                            </a>
                                                        </li>
                                                        <li class="list-inline-item">
                                                            <a href="#" class="m-nav__link m-nav__link--icon" data-toggle="modal" data-target="#modal_qua_delete" (click)="delQua(q.NO)">
                                                                <i class="m-nav__link-icon la la-minus-square"></i>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!--end:repeater form qualification-->
                                </div>
                                <!--end:job qualification table-->
                            </div>
                        </div>
                    </div>
                    <!--end::Item:qualification-->

                    <!--begin::Item:functional-->
                    <div class="m-accordion__item">
                        <div class="m-accordion__item-head collapsed" role="tab" id="m_accordion_1_item_8_head" data-toggle="collapse" href="#m_accordion_1_item_8_body"
                            aria-expanded="    false">
                            <span class="m-accordion__item-mode"></span>
                            <span class="m-accordion__item-title m-accordian__item-mode-title">
                                {{tab8Title}}
                                <span class="m-menu__link-badge">
                                    <span *ngIf="!data.functional||data.functional.length<1; else funcTrue" class="m-badge m-badge--warning">
                                        0
                                    </span>
                                    <ng-template #funcTrue>
                                        <span class="m-badge m-badge--success">
                                            {{data.functional.length}}
                                        </span>
                                    </ng-template>
                                </span>
                            </span>
                            <span class="m-accordion__item-icon">
                                <i class="fa flaticon-grid-menu-v2"></i>
                            </span>
                        </div>
                        <div class="m-accordion__item-body collapse" id="m_accordion_1_item_8_body" role="tabpanel" aria-labelledby="m_accordion_1_item_8_head">
                            <div class="m-accordion__item-content">
                                <!--begin:job qualification table-->
                                <div class="m-portlet__body">
                                    <div *ngIf="!data.functional||data.functional.length<1">{{noData}}</div>
                                    <!--begin:repeater form qualification-->
                                    <table class="table m-table" *ngIf="data.functional&&data.functional.length>0">
                                        <thead>
                                            <tr>
                                                <th>Competency</th>
                                                <th>Definition</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let func of data.functional">
                                                <td>{{func.FC_NAME}}</td>
                                                <td>{{func.FC_DEF}}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <!--end:repeater form qualification-->
                                </div>
                                <!--end:job qualification table-->
                            </div>
                        </div>
                    </div>
                    <!--end::Item:functional -->


                    <!--begin::Item:competencies-->
                    <div class="m-accordion__item">
                        <div class="m-accordion__item-head collapsed" role="tab" id="m_accordion_1_item_4_head" data-toggle="collapse" href="#m_accordion_1_item_4_body"
                            aria-expanded="    false">
                            <span class="m-accordion__item-mode"></span>
                            <span class="m-accordion__item-title m-accordian__item-mode-title">
                                {{tab5Title}}
                                <span class="m-menu__link-badge">
                                    <span *ngIf="!data.technical||data.technical.length<1; else techTrue" class="m-badge m-badge--danger">
                                        0
                                    </span>
                                    <ng-template #techTrue>
                                        <span class="m-badge m-badge--success">
                                            {{data.technical.length}}
                                        </span>
                                    </ng-template>
                                </span>
                            </span>
                            <span class="m-accordion__item-icon">
                                <i class="fa flaticon-puzzle"></i>
                            </span>
                        </div>
                        <div class="m-accordion__item-body collapse" id="m_accordion_1_item_4_body" role="tabpanel" aria-labelledby="m_accordion_1_item_4_head">
                            <div class="m-accordion__item-content">
                                <!--start:competencies table-->
                                <div class="m-portlet__body">
                                    <div class="form-group m-form__group row">
                                        <div class="table-responsive">

                                            <div *ngIf="editedTechCom" class="alert {{addTechComStyle}} m-alert m-alert--default " role="alert">
                                                <strong>{{addTechComMsg}}</strong>
                                            </div>
                                            <div *ngIf="!data.technical||data.technical.length<1">{{noData}}</div>
                                            <div class="col-12 text-right" *ngIf="toUpdTech">
                                                <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#m_modal_tech_com_upd" (click)="updateTechCom(0, '', '', '', '', '')">Add</button>
                                            </div>
                                            <table class="table m-table" *ngIf="data.technical&&data.technical.length>0">
                                                <thead>
                                                    <tr>
                                                        <th>No</th>
                                                        <th>Cluster</th>
                                                        <th>Category</th>
                                                        <th>Competency</th>
                                                        <th>Definition</th>
                                                        <th>Level</th>
                                                        <th *ngIf="toUpdTech"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let t of data.technical;let tc = index">
                                                        <td>{{tc+1}}</td>
                                                        <td>{{t.CLUSTER_ID}} </td>
                                                        <td>{{findTecComCat(t.CATEGORY)}}</td>
                                                        <td>{{t.COMP_NAME}}</td>
                                                        <td>{{t.COMP_DEF}}</td>
                                                        <td>{{t.LEVEL}}</td>
                                                        <td *ngIf="toUpdTech">
                                                            <ul class="list-inline">
                                                                <li class="list-inline-item">
                                                                    <a href="#" class="m-nav__link m-nav__link--icon" data-toggle="modal" data-target="#modal_tech_com_delete" (click)="delTechCom(t.NO)">
                                                                        <i class="m-nav__link-icon la la-minus-square"></i>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!--end:competencies table-->
                                <!--    End Job Tech Com Modal -->
                            </div>
                        </div>
                    </div>
                    <!--end::Item:competencies-->
                    <!--begin::Item:aor-->
                    <div class="m-accordion__item">
                        <div class="m-accordion__item-head collapsed" role="tab" id="m_accordion_1_item_5_head" data-toggle="collapse" href="#m_accordion_1_item_5_body"
                            aria-expanded="    false">
                            <span class="m-accordion__item-mode"></span>
                            <span class="m-accordion__item-title m-accordian__item-mode-title">
                                {{tab6Title}}
                                <span class="m-menu__link-badge">
                                    <span *ngIf="!data.aor||data.aor.length<1; else aorTrue" class="m-badge m-badge--danger">
                                        0
                                    </span>
                                    <ng-template #aorTrue>
                                        <span class="m-badge m-badge--success">
                                            {{data.aor.length}}
                                        </span>
                                    </ng-template>
                                </span>
                            </span>
                            <span class="m-accordion__item-icon">
                                <i class="fa flaticon-network"></i>
                            </span>
                        </div>
                        <div class="m-accordion__item-body collapse" id="m_accordion_1_item_5_body" role="tabpanel" aria-labelledby="m_accordion_1_item_5_head">
                            <div class="m-accordion__item-content">
                                <!--start:aor table-->
                                <div class="m-portlet__body">
                                    <div class="form-group m-form__group row">
                                        <div class="table-responsive">
                                            <div *ngIf="editedAor" class="alert {{updAorStyle}} m-alert m-alert--default " role="alert">
                                                <strong>{{addAorMsg}}</strong>
                                            </div>
                                            <div *ngIf="!data.aor||data.aor.length<1">{{noData}}</div>
                                            <div class="col-12 text-right" *ngIf="toUpdAOR">
                                                <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#m_modal_aor_upd" (click)="updateAor(0, '', '')">Add</button>
                                            </div>
                                            <table class="table m-table" *ngIf="data.aor&&data.aor.length>0">
                                                <thead>
                                                    <tr>
                                                        <th>No</th>
                                                        <th>RESPONSIBILITY</th>
                                                        <th>KEY ACTIVITIES</th>
                                                        <th *ngIf="toUpdAOR"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let a of data.aor;let ac = index">
                                                        <td>{{ac+1}}</td>
                                                        <td>{{a.AOR}} </td>
                                                        <td>{{a.KEY_ACT}}</td>
                                                        <td *ngIf="toUpdAOR">
                                                            <ul class="list-inline">
                                                                <li class="list-inline-item">
                                                                    <a href="#" class="m-nav__link m-nav__link--icon" data-toggle="modal" data-target="#m_modal_aor_upd" (click)="updateAor(a.NO, a.AOR, a.KEY_ACT)">
                                                                        <i class="m-nav__link-icon la la-edit"></i>
                                                                    </a>
                                                                </li>
                                                                <li class="list-inline-item">
                                                                    <a href="#" class="m-nav__link m-nav__link--icon" data-toggle="modal" data-target="#modal_aor_delete" (click)="delAor(a.NO)">
                                                                        <i class="m-nav__link-icon la la-minus-square"></i>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!--end:aor table-->
                            </div>
                        </div>
                    </div>
                    <!--end::Item:aor-->
                    <!--begin::Item:experiences-->
                    <div class="m-accordion__item">
                        <div class="m-accordion__item-head collapsed" role="tab" id="m_accordion_1_item_6_head" data-toggle="collapse" href="#m_accordion_1_item_6_body"
                            aria-expanded="    false">
                            <span class="m-accordion__item-mode"></span>
                            <span class="m-accordion__item-title m-accordian__item-mode-title">
                                {{tab7Title}}
                                <span class="m-menu__link-badge">
                                    <span class="m-badge m-badge--danger" *ngIf="!data.requirements||data.requirements.length<1; else reqTrue">
                                        0
                                    </span>
                                    <ng-template #reqTrue>
                                        <span class="m-badge m-badge--success">
                                            {{data.requirements.length}}
                                        </span>
                                    </ng-template>
                                </span>
                            </span>

                            <span class="m-accordion__item-icon">
                                <i class="fa flaticon-profile-1"></i>
                            </span>
                        </div>
                        <div class="m-accordion__item-body collapse" id="m_accordion_1_item_6_body" role="tabpanel" aria-labelledby="m_accordion_1_item_6_head">
                            <div class="m-accordion__item-content">
                                <!--start:experiences table-->
                                <div class="m-portlet__body">
                                    <div class="form-group m-form__group row">
                                        <div class="table-responsive">

                                            <div *ngIf="editedReq" class="alert {{updReqStyle}} m-alert m-alert--default " role="alert">
                                                <strong>{{addReqMsg}}</strong>
                                            </div>
                                            <div *ngIf="!data.requirements||data.requirements.length<1">{{noData}}</div>
                                            <div class="col-12 text-right" *ngIf="toUpdExp">
                                                <button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#m_modal_req_upd" (click)="updateReq(0, '', '')">Add</button>
                                            </div>
                                            <table class="table m-table" *ngIf="data.requirements&&data.requirements.length>0">
                                                <thead>
                                                    <tr>
                                                        <th>No</th>
                                                        <th>AREA</th>
                                                        <th>YEARS</th>
                                                        <th *ngIf="toUpdExp"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let r of data.requirements;let rc = index">
                                                        <td>{{rc+1}}</td>
                                                        <td>{{r.AREA}} </td>
                                                        <td>{{r.YEARS}}</td>
                                                        <td *ngIf="toUpdExp">
                                                            <ul class="list-inline">
                                                                <li class="list-inline-item">
                                                                    <a href="#" class="m-nav__link m-nav__link--icon" data-toggle="modal" data-target="#m_modal_req_upd" (click)="updateReq(r.expNo, r.AREA, r.YEARS)">
                                                                        <i class="m-nav__link-icon la la-edit"></i>
                                                                    </a>
                                                                </li>
                                                                <li class="list-inline-item">
                                                                    <a href="#" class="m-nav__link m-nav__link--icon" data-toggle="modal" data-target="#modal_req_delete" (click)="delReq(r.expNo)">
                                                                        <i class="m-nav__link-icon la la-minus-square"></i>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <!--end:experiences table-->
                            </div>
                        </div>
                    </div>
                    <!--end::Item:experiences-->
                </div>
                <!--end::Section-->
            </div>
            <!--end::Portlet-->

        </div>

        <div class="col-lg-12" *ngIf="toAdvJob">
            <!--
            <div *ngIf="editedAdvPos" class="alert {{advPosStyle}} m-alert m-alert--default " role="alert">
                <strong>{{advPosMsg}}</strong>
            </div>-->

            <div *ngIf="editedAdvPos" class="m-alert m-alert--icon m-alert--outline alert {{advPosStyle}} alert-dismissible fade show"
                role="alert">
                <div class="m-alert__icon">
                    <i class="flaticon-exclamation-1"></i>
                </div>
                <div class="m-alert__text">
                    {{advPosMsg}}
                </div>
                <!-- <div class="m-alert__close">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"></button>
                    </div> -->
            </div>


            <div *ngIf="showAdvDisableMsg" class="alert m-alert m-alert--default " role="alert">
                <strong>{{advDisableMsg}}</strong>
            </div>

            <div *ngIf="advBtnDisplay" class="m-button-advert">
                <!--begin::advertise buttons -->
                <button id="advertise-job" type="button" class="btn m-btn--pill btn-primary btn-lg m-btn m-btn--custom" data-toggle="modal"
                    data-target="#m_modal_advert" [disabled]="advDisabled" (click)="checkOccupied(data.profile[0].Occupied); ">{{btnAdvertise}}
                </button>
                <!--end::advertise buttons -->
            </div>
        </div>
    </div>

</div>


<!-- Start Job Qualification Modal -->
<div class="modal fade" id="m_modal_qua_upd" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <form [formGroup]="updQualificationForm" (ngSubmit)="onQualificationFormSubmit()">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                        {{this.updFormQuaTitle}} {{tab4Title}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">
                            &times;
                        </span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="recipient-name" class="form-control-label">
                            Category:
                        </label>
                        <select class="form-control m-input" formControlName="updQuaCat" required>
                            <option *ngFor="let x of quaList" [value]="x.id" [selected]="qualification.qua.id == x.id">{{x.name}}</option>
                        </select>
                        <input type="hidden" formControlName="updQuaIdx" required>
                        <!-- <input class="form-control m-input" formControlName="updQuaPosId" required> -->
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="form-control-label">
                            Area:*
                        </label>
                        <input class="form-control m-input" formControlName="updQuaArea" required>
                        <p class="error_message" style="color:red" *ngIf="updQualificationForm.get('updQuaArea').hasError('required') && (updQualificationForm.get('updQuaArea').dirty)">Please define area.</p>
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="form-control-label" required>
                            Sub-Area:*
                        </label>
                        <input class="form-control m-input" formControlName="updQuaSubArea" required>
                        <p class="error_message" style="color:red" *ngIf="updQualificationForm.get('updQuaSubArea').hasError('required') && (updQualificationForm.get('updQuaSubArea').dirty)">Please define sub-area.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Close
                    </button>
                    <button type="submit" class="btn btn-primary" [disabled]="!updQualificationForm.valid" onclick="$('.modal').modal('hide')">
                        Save
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="modal fade" id="modal_qua_delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered " role="document">
        <form [formGroup]="delQualificationForm" (ngSubmit)="onDelQualificationFormSubmit()">
            <div class="modal-content m-alert m-alert--icon alert alert-danger">
                <div class="modal-body">
                    <p>Are you sure to delete this item?</p>
                    <input type="hidden" formControlName="delQuaIdx" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" data-dismiss="modal">
                        No
                    </button>
                    <button type="submit" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" [disabled]="!delQualificationForm.valid"
                        onclick="$('.modal').modal('hide')">
                        Yes
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- End Job Qualification Modal -->

<!-- Start AOR Modal -->
<div class="modal fade" id="m_modal_aor_upd" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <form [formGroup]="updAorForm" (ngSubmit)="onAorFormSubmit()">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                        {{this.updFormAorTitle}} {{tab6Title}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">
                            &times;
                        </span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="message-text" class="form-control-label">
                            Area of Responsibilities:*
                        </label>
                        <input type="hidden" formControlName="updAorIdx" required>
                        <input class="form-control m-input" formControlName="updAor" required>
                        <p class="error_message" style="color:red" *ngIf="updAorForm.get('updAor').hasError('required') && (updAorForm.get('updAor').dirty)">Please define area of responsibility.</p>
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="form-control-label">
                            Key Activities:*
                        </label>
                        <input class="form-control m-input" formControlName="updKeyAct" required>
                        <p class="error_message" style="color:red" *ngIf="updAorForm.get('updKeyAct').hasError('required') && (updAorForm.get('updKeyAct').dirty)">Please define key activities.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Close
                    </button>
                    <button type="submit" class="btn btn-primary" [disabled]="!updAorForm.valid" onclick="$('.modal').modal('hide')">
                        Save
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="modal fade" id="modal_aor_delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered " role="document">
        <form [formGroup]="delAorForm" (ngSubmit)="onDelAorFormSubmit()">
            <div class="modal-content m-alert m-alert--icon alert alert-danger">
                <div class="modal-body">
                    <p>Are you sure to delete this item?</p>
                    <input type="hidden" formControlName="delAorIdx" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" data-dismiss="modal">
                        No
                    </button>
                    <button type="submit" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" [disabled]="!delAorForm.valid" onclick="$('.modal').modal('hide')">
                        Yes
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- End AOR Modal -->

<!-- Start Requirements Modal   -->
<div class="modal fade" id="m_modal_req_upd" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <form [formGroup]="updReqForm" (ngSubmit)="onReqFormSubmit()">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                        {{this.updFormReqTitle}} {{tab7Title}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">
                            &times;
                        </span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="message-text" class="form-control-label">
                            Area:*
                        </label>
                        <input type="hidden" formControlName="updReqIdx" required>
                        <input class="form-control m-input" formControlName="updReqArea" required>
                        <p class="error_message" style="color:red" *ngIf="updReqForm.get('updReqArea').hasError('required') && (updReqForm.get('updReqArea').dirty)">Please define area.</p>
                    </div>
                    <div class="form-group">
                        <label for="message-text" class="form-control-label">
                            Years:*
                        </label>
                        <input class="form-control m-input" formControlName="updReqYear" required type="number" min="0">
                        <p class="error_message" style="color:red" *ngIf="updReqForm.get('updReqYear').hasError('required') && (updReqForm.get('updReqYear').dirty)">Please define year.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Close
                    </button>
                    <button type="submit" class="btn btn-primary" [disabled]="!updReqForm.valid" onclick="$('.modal').modal('hide')">
                        Save
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="modal fade" id="modal_req_delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered " role="document">
        <form [formGroup]="delReqForm" (ngSubmit)="onDelReqFormSubmit()">
            <div class="modal-content m-alert m-alert--icon alert alert-danger">
                <div class="modal-body">
                    <p>Are you sure to delete this item?</p>
                    <input type="hidden" formControlName="delReqIdx" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" data-dismiss="modal">
                        No
                    </button>
                    <button type="submit" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" [disabled]="!delReqForm.valid" onclick="$('.modal').modal('hide')">
                        Yes
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- End Requirements Model -->

<!-- Start Job Tech Com Modal -->
<div class="modal fade" id="m_modal_tech_com_upd" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <form [formGroup]="updTechComForm" (ngSubmit)="onTechComFormSubmit()">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">
                        {{this.updFormTechComTitle}} {{tab5Title}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">
                            &times;
                        </span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="recipient-name" class="form-control-label">
                            Job Cluster:
                        </label>
                        <!--  [selected]="('Business Strategy'.match(x.name)!== null)" >> {{('comCluster.comClus.name'.match(x.name)=== null)}}  >> {{comCluster.comClus.name}} -->
                        <select class="form-control m-input" formControlName="updTechComClusIdOpt" (change)="clusChangedUpdCat()" required>
                            <option *ngFor="let x of comClusterList" [value]="x.name" [selected]="comCluster.comClus.name===x.name">{{x.name}}</option>
                        </select>
                        <input type="hidden" formControlName="updTechComIdx" required>
                    </div>
                    <div class="form-group" *ngIf="tglTectComCat">
                        <label for="recipient-name" class="form-control-label">
                            Job Category:
                        </label>
                        <!-- {{comCat.comCat.name.match(x.name)!==null}} -->
                        <select class="form-control m-input" formControlName="updTechComCatOpt" (change)="catChangedUpdCom($event.target.value)">
                            <option *ngFor="let x of comCatList" [value]="x.name">{{x.name}} </option>
                        </select>
                    </div>
                    <div class="form-group" *ngIf="tglTectComCom">
                        <label for="message-text" class="form-control-label">
                            Competency:*
                        </label>
                        <select class="form-control m-input" formControlName="updTechComComOpt" (change)="comChangedUpdDef($event.target.value)"
                            required>
                            <option *ngFor="let x of comComList" [value]="x.name" [selected]="( ( ('comCom.comCom.name'.match(x.name) !== null) )  )">{{x.name}}</option>
                        </select>
                    </div>
                    <div class="form-group" *ngIf="tglTectComComDef">
                        <label for="message-text" class="form-control-label">
                            Competency Definition:
                        </label>
                        <textarea class="form-control m-input" formControlName="updTechComDef" required disabled></textarea>
                    </div>
                    <div class="form-group" *ngIf="tglTectComComDef">
                        <label for="message-text" class="form-control-label">
                            Level:*
                            <input type="hidden" formControlName="updTechComLvlHidden" required value='-- Select Level --'>
                        </label>
                        <select class="form-control m-input" formControlName="updTechComLvl" required (change)="lvlChangedUpdLvlHidden($event.target.value)">
                            <option *ngFor="let x of comLvlList" [value]="x.name">{{x.name}}</option>
                        </select>
                        <p class="error_message" style="color:red" *ngIf="errLevel">Please define level</p>
                        <!-- <p class="error_message" style="color:red" *ngIf="updTechComForm.get('updTechComLvlHidden').hasError('required') && (updTechComForm.get('updTechComLvlHidden').dirty || updTechComForm.get('updTechComLvl').value.match('-- Select Level --')!==null)">Please define level.</p> -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Close
                    </button>
                    <button type="submit" class="btn btn-primary" [disabled]="errLevel" onclick="$('.modal').modal('hide')">
                        Save
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="modal fade" id="modal_tech_com_delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered " role="document">
        <form [formGroup]="delTechComForm" (ngSubmit)="onDelTechComFormSubmit()">
            <div class="modal-content m-alert m-alert--icon alert alert-danger">
                <div class="modal-body">
                    <p>Are you sure to delete this item?</p>
                    <input type="hidden" formControlName="delTechComIdx" required>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" data-dismiss="modal">
                        No
                    </button>
                    <button type="submit" class="btn btn-outline-light btn-sm m-btn m-btn--hover-brand" [disabled]="!delTechComForm.valid" onclick="$('.modal').modal('hide')">
                        Yes
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- End Job Tech Com Modal -->

<!--begin::advertise modal-->
<div class="modal fade" id="m_modal_advert" tabindex="-1" role="dialog" aria-labelledby="advertiseModalCenterTitle" aria-hidden="true"
    style="display: none;">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <form [formGroup]="advPosForm">
            <!--(ngSubmit)="onadvPosFormSubmit()"-->
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">
                        Advertise Position #{{posId2}}
                    </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">
                            
                        </span>
                    </button>
                </div>

                <div class="modal-body">
                    <div class="alert alert-{{advMsgStyle}}" role="alert">
                        <p>{{msgDefault}}</p>
                        <!-- <strong></strong> -->
                        <label class="m-checkbox m-checkbox--square" *ngIf="showOccMsg">
                            <!-- m-checkbox m-checkbox--state-success (change)="onCheckboxChange(profile[0]?.Occupied,$event)"-->
                            <input type="checkbox" [required]="apprRemark" formControlName="advPosRemarkCheckBox" value="1"> {{msgOccupied}}
                            <span></span>
                        </label>
                    </div>

                    <div class="m-form__section m-form__section--first">

                        <!-- start requestor -->
                        <div class="form-group m-form__group row">
                            <label for="example-text-input" class="col-2 col-form-label">Requestor *</label>
                            <div class="col-10">
                                <div class="form-group m-form__group row">
                                    <div class="col-lg-4 col-md-9 col-sm-12">
                                        <select class="form-control m-input" required formControlName="advPosRequestor">
                                            <option value="" disabled selected>Select a Requester</option>
                                            <option *ngFor="let item of optReqList" [value]="item.Staff_No">{{item.Pernr_Name}}</option>
                                        </select>
                                        <!-- <span class="m-form__help">
                                            You can add a search input by passing
                                            <code>data-live-search="true" </code> attribute
                                        </span> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end requestor -->

                        <div class="form-group m-form__group row">
                            <label for="example-text-input" class="col-2 col-form-label">Remarks
                                <span *ngIf="apprRemark">*</span>
                            </label>
                            <div class="col-10">
                                <textarea formControlName="advPosRemark" id="advertise_remarks" class="form-control m-input m-input--air m-input--pill" required
                                    rows="8"></textarea>
                            </div>
                            <input type="hidden" formControlName="advPosIdx2" required value="{{data.profile && data.profile[0].position_id}}">
                        </div>
                    </div>
                    <div class="m-form__seperator m-form__seperator--dashed"></div>
                    <div class="m-form__section m-form__section--last">
                        <div class="form-group m-form__group row">
                            <label for="example-text-input" class="col-2 col-form-label">Adv Period*</label>
                            <div class="col-8">
                                <!-- START DATE RANGE PICKER -->
                                <div class='input-group' id='m_daterangepicker_2' (click)="disableSubmit()" required>
                                    <input type='text' id="advPosDtRange" formControlName="advPosDtRange" class="form-control m-input" readonly />
                                    <!-- placeholder="Select date range" -->
                                    <div class="input-group-append">
                                        <span class="input-group-text">
                                            <i class="la la-calendar-check-o"></i>
                                        </span>
                                    </div>
                                </div>
                                <!-- END DATE RANGE PICKER -->

                                <div *ngIf="false" class="input-daterange input-group" id="advertise_daterangepicker">
                                    <input type="text" class="form-control m-input m-input--air m-input--pill" formControlName="advPosStartDt" name="start" id="advPosStartDt"
                                        (click)="disableSubmit()" />
                                    <div class="input-group-append">
                                        <span class="input-group-text">
                                            <i class="la la-ellipsis-h"></i>
                                        </span>
                                    </div>
                                    <input type="text" class="form-control" formControlName="advPosEndDt" name="end" id="advPosEndDt" />
                                    <input type="hidden" formControlName="advPosStartDt2" name="start2" id="advPosStartDt2" />
                                    <input type="hidden" formControlName="advPosEndDt2" name="end2" id="advPosEndDt2" />
                                    <p class="error_message" style="color:red" *ngIf="(advPosForm.get('advPosStartDt').hasError('required') && (advPosForm.get('advPosStartDt').dirty)||advPosForm.get('advPosEndDt').hasError('required') && (advPosForm.get('advPosEndDt').dirty))">Please define advertisement period.</p>
                                    <p class="error_message" style="color:red" *ngIf="errAdvPeriod">Please define advertisement period.</p>
                                </div>

                                <span class="m-form__help">
                                    {{msgAdvPeriod}}
                                </span>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="modal-footer">

                    <button id="sendForAdvertisement2" style="visibility: hidden" (click)="onadvPosFormSubmit()" [disabled]="disableSubmitAdv||!advPosForm.valid"
                        type="button" class="btn btn-primary" onclick="$('.modal').modal('hide')">
                        Confirm 2
                    </button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Close
                    </button>
                    <!-- type="submit" onclick="$('.modal').modal('hide')" -->
                    <button id="sendForAdvertisement" [disabled]="disableSubmitAdv||!advPosForm.valid" type="button" class="btn btn-primary">
                        Confirm
                    </button>

                </div>
            </div>
        </form>

    </div>
</div>
<!--end::advertise modal-->
<style>
    .m-accordian__item-mode-title {
        padding-left: 1.5rem;
    }

    .m-button-advert {
        float: right;
        padding-bottom: 1rem;
    }

    .m-repeater-edit-delete {
        margin-top: 1.8rem;
    }

    .m-repeater-edit-delete .btn {
        width: 6.2rem;
    }

    .m-dropzone {
        min-height: 160px;
        border-radius: 18px;
        box-shadow: 0 3px 20px 0 rgba(113, 106, 202, .11);
    }

    .dropzone .dz-preview {
        margin: 0;
    }

    .dropzone .dz-preview.dz-file-preview .dz-image,
    .m-dropzone .dz-preview .dz-image {
        border-radius: 0;
    }

    [hidden] {
        display: none !important;
    }
</style>